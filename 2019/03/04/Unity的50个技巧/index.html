<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="专业,">










<meta name="description" content="Unity的50个技巧：Unity最佳实践 欢迎 来到  王国聪的博客!     内容概要学习Unity3D引擎，除了官方的手册以外，其他人的经验也是非常有益的。偶尔看到老外这篇文章，觉得还不错，于是翻译过来和大家共享。  【欢迎转载，请注明作者：燕良，原文出处：游戏程序员的自我修养】  原文地址：http://devmag.org.za/2012/07/12/50-tips-for-workin">
<meta name="keywords" content="专业">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity的50个技巧">
<meta property="og:url" content="http://yoursite.com/2019/03/04/Unity的50个技巧/index.html">
<meta property="og:site_name" content="欢迎来到王国聪的博客">
<meta property="og:description" content="Unity的50个技巧：Unity最佳实践 欢迎 来到  王国聪的博客!     内容概要学习Unity3D引擎，除了官方的手册以外，其他人的经验也是非常有益的。偶尔看到老外这篇文章，觉得还不错，于是翻译过来和大家共享。  【欢迎转载，请注明作者：燕良，原文出处：游戏程序员的自我修养】  原文地址：http://devmag.org.za/2012/07/12/50-tips-for-workin">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-04T09:19:38.881Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unity的50个技巧">
<meta name="twitter:description" content="Unity的50个技巧：Unity最佳实践 欢迎 来到  王国聪的博客!     内容概要学习Unity3D引擎，除了官方的手册以外，其他人的经验也是非常有益的。偶尔看到老外这篇文章，觉得还不错，于是翻译过来和大家共享。  【欢迎转载，请注明作者：燕良，原文出处：游戏程序员的自我修养】  原文地址：http://devmag.org.za/2012/07/12/50-tips-for-workin">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/04/Unity的50个技巧/">





  <title>Unity的50个技巧 | 欢迎来到王国聪的博客</title>
  








</head>


   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>


<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">欢迎来到王国聪的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">所有的为时已晚都是开始的最好时候</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            留言
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/04/Unity的50个技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王国聪">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/2.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="欢迎来到王国聪的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Unity的50个技巧</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-04T14:16:22+08:00">
                2019-03-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/unity/" itemprop="url" rel="index">
                    <span itemprop="name">unity</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/unity/50个技巧/" itemprop="url" rel="index">
                    <span itemprop="name">50个技巧</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/04/Unity的50个技巧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/03/04/Unity的50个技巧/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  27
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Unity的50个技巧：Unity最佳实践"><a href="#Unity的50个技巧：Unity最佳实践" class="headerlink" title="Unity的50个技巧：Unity最佳实践"></a><center>Unity的50个技巧：Unity最佳实践</center></h1><ul>
<li><p>欢迎 来到  <a href="https://wangguocong.github.io/archives/" target="_blank" rel="noopener">王国聪</a>的博客! </p>
</li>
</ul>
<blockquote>
<p><strong>内容概要</strong><br>学习Unity3D引擎，除了官方的手册以外，其他人的经验也是非常有益的。偶尔看到老外这篇文章，觉得还不错，于是翻译过来和大家共享。</p>
</blockquote>
<p>【欢迎转载，请注明作者：燕良，原文出处：<a href="https://neil3d.github.io/" target="_blank" rel="noopener">游戏程序员的自我修养</a>】</p>
<blockquote>
<p>原文地址：<br><a href="http://devmag.org.za/2012/07/12/50-tips-for-working-with-unity-best-practices" target="_blank" rel="noopener">http://devmag.org.za/2012/07/12/50-tips-for-working-with-unity-best-practices</a></p>
</blockquote>
<h2 id="关于这些技巧"><a href="#关于这些技巧" class="headerlink" title="关于这些技巧"></a>关于这些技巧</h2><p>这些技巧不可能适用于每个项目。</p>
<ul>
<li><p>这些是基于我的一些项目经验，项目团队的规模从3人到20人不等；</p>
</li>
<li><p>框架结构的可重用性、清晰程度是有代价的——团队的规模和项目的规模决定你要在这个上面付出多少；</p>
</li>
<li><p>很多技巧是品味的问题（这里所列的所有技巧，可能有同样好的技术替代方案）；</p>
</li>
<li><p>一些技巧可能是对传统的Unity开发的一个冲击。例如，使用prefab替代对象实例并不是一个传统的Unity风格，并且这样做的代价还挺高的（需要很多的preffab）。也许这些看起来有些疯狂，但是在我看来是值得的。</p>
</li>
</ul>
<h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><h3 id="1、避免Assets分支"><a href="#1、避免Assets分支" class="headerlink" title="1、避免Assets分支"></a>1、避免Assets分支</h3><p>所有的Asset都应该只有一个唯一的版本。如果你真的需要一个分支版本的Prefab、Scene或是Mesh，那你要制定一个非常清晰的流程，来确定哪个是正确的版本。错误的分支应该起一个特别的名字，例如双下划线前缀：__MainScene_Backup。Prefab版本分支需要一个特别的流程来保证安全（详见Prefabs一节）。</p>
<h3 id="2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second-Copy用来测试"><a href="#2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second-Copy用来测试" class="headerlink" title="2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second Copy用来测试"></a>2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second Copy用来测试</h3><p>修改之后，Second Copy和Clean Copy都应该被更新和测试。大家都不要修改自己的Clean Copy。这对于测试Asset丢失特别有用。</p>
<h3 id="3、考虑使用外部的关卡编辑工具"><a href="#3、考虑使用外部的关卡编辑工具" class="headerlink" title="3、考虑使用外部的关卡编辑工具"></a>3、考虑使用外部的关卡编辑工具</h3><p>Unity不是一个完美的关卡编辑器。例如，我们使用 TuDee 来创建 3D Tile-Based 的游戏，这使我们可以获得对 Tile 友好的工具的益处（网格约束，90度倍数的旋转，2D 视图，快速 Tile 选择等）。从一个XML文件来实例化 Prefab 也很简单。详见 Guerrilla Tool Development。</p>
<h3 id="4、考虑把关卡保存为XML，而非scene"><a href="#4、考虑把关卡保存为XML，而非scene" class="headerlink" title="4、考虑把关卡保存为XML，而非scene"></a>4、考虑把关卡保存为XML，而非scene</h3><p>这是一种很奇妙的技术：</p>
<ul>
<li>它可以让你不必每个场景都设置一遍；</li>
<li>它可以加载的更快（如果大多数对象都是在场景之间共享的）。</li>
<li>它让场景的版本合并变的简单（就算是Unity的新的文本格式的Scene，也由于数据太多，而让版本合并变的不切实际）。</li>
<li>它可以使得在关卡之间保持数据更简便。</li>
</ul>
<p>你仍就可以使用Unity作为关卡编辑器（尽管你用不着了）。你需要写一些你的数据的序列化和反序列化的代码，并实现在编辑器和游戏运行时加载关卡、在编辑器中保存关卡。你可能需要模仿Unity的ID系统来维护对象之间的引用关系。</p>
<h3 id="5、考虑编写通用的自定义Inspector代码"><a href="#5、考虑编写通用的自定义Inspector代码" class="headerlink" title="5、考虑编写通用的自定义Inspector代码"></a>5、考虑编写通用的自定义Inspector代码</h3><p>实现自定义的Inspector是很直截了当的，但是Unity的系统有很多的缺点：</p>
<ul>
<li>它不支持从继承中获益；</li>
<li>它不允许定义字段级别的Inspector组件，而只能是class类型级别。举个例子，如果没有游戏对象都有一个ScomeCoolType字段，而你想在Inspector中使用不同的渲染，那么你必须为你的所有class写Inspector代码。</li>
</ul>
<p>你可以通过从根本上重新实现Inspector系统来处理这些问题。通过一些反射机制的小技巧，他并不像看上去那么看，文章底部（日后另作翻译）将提供更多的实现细节。</p>
<h2 id="场景组织"><a href="#场景组织" class="headerlink" title="场景组织"></a>场景组织</h2><h3 id="6、使用命名的空Game-Object来做场景目录"><a href="#6、使用命名的空Game-Object来做场景目录" class="headerlink" title="6、使用命名的空Game Object来做场景目录"></a>6、使用命名的空Game Object来做场景目录</h3><p>仔细的组织场景，就可以方便的找到任何对象。</p>
<h3 id="7、把控制对象和场景目录（空Game-Objec）放在原点（0，0，0）"><a href="#7、把控制对象和场景目录（空Game-Objec）放在原点（0，0，0）" class="headerlink" title="7、把控制对象和场景目录（空Game Objec）放在原点（0，0，0）"></a>7、把控制对象和场景目录（空Game Objec）放在原点（0，0，0）</h3><p>如果位置对于这个对象不重要，那么就把他放到原点。这样你就不会遇到处理Local Space和World Space的麻烦，代码也会更简洁。</p>
<h3 id="8、尽量减少使用GUI组件的offset"><a href="#8、尽量减少使用GUI组件的offset" class="headerlink" title="8、尽量减少使用GUI组件的offset"></a>8、尽量减少使用GUI组件的offset</h3><p>通常应该由控件的Layout父对象来控制Offset；它们不应该依赖它们的爷爷节点的位置。位移不应该互相抵消来达到正确显示的目的。做基本上要防止了下列情况的发生： 父容器被放到了（100，-50），而字节点应该在（10，10），所以把他放到（90，60）[父节点的相对位置]。 这种错误通常放生在容器不可见时。</p>
<h3 id="9、把世界的地面放在Y-0"><a href="#9、把世界的地面放在Y-0" class="headerlink" title="9、把世界的地面放在Y=0"></a>9、把世界的地面放在Y=0</h3><p>这样可以更方便的把对象放到地面上，并且在游戏逻辑中，可以把世界作为2D空间来处理（如果合适的话），例如AI和物理模拟。</p>
<h3 id="10、使游戏可以从每个Scene启动"><a href="#10、使游戏可以从每个Scene启动" class="headerlink" title="10、使游戏可以从每个Scene启动"></a>10、使游戏可以从每个Scene启动</h3><p>这将大大的降低测试的时间。为了达到所有场景可运行，你需要做两件事：</p>
<ul>
<li>首先，如果需要前面场景运行产生的一些数据，那么要模拟出它们。</li>
<li>其次，生成在场景切换时必要保存的对象，可以是这样：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myObject = FindMyObjectInScene();</span><br><span class="line"> </span><br><span class="line">if (myObjet == null)</span><br><span class="line">&#123;</span><br><span class="line">   myObject = SpawnMyObject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="美术"><a href="#美术" class="headerlink" title="美术"></a>美术</h2><h3 id="11、把角色和地面物体的中心点-Pivot-放在底部，不要放在中间"><a href="#11、把角色和地面物体的中心点-Pivot-放在底部，不要放在中间" class="headerlink" title="11、把角色和地面物体的中心点(Pivot)放在底部，不要放在中间"></a>11、把角色和地面物体的中心点(Pivot)放在底部，不要放在中间</h3><p>这可以使你方便的把角色或者其他对象精确的放到地板上。如果合适的话，它也可能使得游戏逻辑、AI、甚至是物理使用2D逻辑来表现3D。</p>
<h3 id="12、统一所有的模型的面朝向（Z轴正向或者反向）"><a href="#12、统一所有的模型的面朝向（Z轴正向或者反向）" class="headerlink" title="12、统一所有的模型的面朝向（Z轴正向或者反向）"></a>12、统一所有的模型的面朝向（Z轴正向或者反向）</h3><p>对于所有具有面朝向的对象（例如角色）都应该遵守这一条。在统一面朝向的前提下，很多算法可以简化。</p>
<h3 id="13、在开始就把Scale搞正确"><a href="#13、在开始就把Scale搞正确" class="headerlink" title="13、在开始就把Scale搞正确"></a>13、在开始就把Scale搞正确</h3><p>请美术把所有导入的缩放系数设置为1，并且把他们的Transform的Scale设置为1,1,1。可以使用一个参考对象（一个Unity的Cube）来做缩放比较。为你的游戏选择一个世界的单位系数，然后坚持使用它。</p>
<h3 id="14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型"><a href="#14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型" class="headerlink" title="14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型"></a>14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型</h3><p>设置这个平面面朝向Z轴正向，可能简化Billboard和GUI创建。</p>
<h3 id="15、制作并使用测试资源"><a href="#15、制作并使用测试资源" class="headerlink" title="15、制作并使用测试资源"></a>15、制作并使用测试资源</h3><ul>
<li><p>为SkyBox创建带文字的方形贴图；</p>
</li>
<li><p>一个网格（Grid）；</p>
</li>
<li><p>为Shader测试使用各种颜色的平面：白色，黑色，50%灰度，红，绿，蓝，紫，黄，青；</p>
</li>
<li><p>为Shader测试使用渐进色：黑到白，红到绿，红到蓝，绿到蓝；</p>
</li>
<li><p>黑白格子；</p>
</li>
<li><p>平滑的或者粗糙的法线贴图；</p>
</li>
<li><p>一套用来快速搭建场景的灯光（使用Prefab）；</p>
</li>
</ul>
<h2 id="Prefabs"><a href="#Prefabs" class="headerlink" title="Prefabs"></a>Prefabs</h2><h3 id="16、所有东西都使用Prefab"><a href="#16、所有东西都使用Prefab" class="headerlink" title="16、所有东西都使用Prefab"></a>16、所有东西都使用Prefab</h3><p>只有场景中的“目录”对象不使用Prefab。甚至是那些只使用一次的唯一对象也应该使用Prefab。这样可以在不动用场景的情况下，轻松修改他们。（一个额外的好处是，当你使用EZGUI时，这可以用来创建稳定的Sprite Atlases）</p>
<h3 id="17、对于特例使用单独的Prefab，而不要使用特殊的实例对象"><a href="#17、对于特例使用单独的Prefab，而不要使用特殊的实例对象" class="headerlink" title="17、对于特例使用单独的Prefab，而不要使用特殊的实例对象"></a>17、对于特例使用单独的Prefab，而不要使用特殊的实例对象</h3><p>如果你有两种敌人的类型，并且只是属性有区别，那么为不同的属性分别创建Prefab，然后链接他们。这可以：</p>
<ul>
<li>在同一个地方修改所有类型</li>
<li>在不动用场景的情况下进行修改</li>
</ul>
<p>如果你有很多敌人的类型，那么也不要在编辑器中使用特殊的实例。一种可选的方案是程序化处理它们，或者为所有敌人使用一个核心的文件/Prefab。使用一个下拉列表来创建不同的敌人，或者根据敌人的位置、玩家的进度来计算。</p>
<h3 id="18、在Prefab之间链接，而不要链接实例对象"><a href="#18、在Prefab之间链接，而不要链接实例对象" class="headerlink" title="18、在Prefab之间链接，而不要链接实例对象"></a>18、在Prefab之间链接，而不要链接实例对象</h3><p>当Prefab放置到场景中时，它们的链接关系是被维护的，而实例的链接关系不被维护。尽可能的使用Prefab之间的链接可以减少场景创建的操作，并且减少场景的修改。</p>
<h3 id="19、如果可能，自动在实例对象之间产生链接关系"><a href="#19、如果可能，自动在实例对象之间产生链接关系" class="headerlink" title="19、如果可能，自动在实例对象之间产生链接关系"></a>19、如果可能，自动在实例对象之间产生链接关系</h3><p>如果你确实需要在实例之间链接，那么应该在程序代码中去创建。例如，Player对象在Start时需要把自己注册到GameManager，或者GameManager可以在Start时去查找Player对象。 <strong>对于需要添加脚本的Prefab，不要用Mesh作为根节点。</strong> 当你需要从Mesh创建一个Prefab时，首先创建一个空的GameObject作为父对象，并用来做根节点。把脚本放到根节点上，而不要放到Mesh节点上。使用这种方法，当你替换Mesh时，就不会丢失所有你在Inspector中设置的值了。 <strong>使用互相链接的Prefab来实现Prefab嵌套。</strong> Unity并不支持Prefab的嵌套，在团队合作中第三方的实现方案可能是危险的，因为嵌套的Prefab之间的关系是不明确的。</p>
<h3 id="20、使用安全的流程来处理Prefab分支"><a href="#20、使用安全的流程来处理Prefab分支" class="headerlink" title="20、使用安全的流程来处理Prefab分支"></a>20、使用安全的流程来处理Prefab分支</h3><p>我们用一个名为Player的Prefab来讲解这个过程。 用下面这个流程来修改Player：</p>
<ol>
<li>复制Player Prefab；</li>
<li>把复制出来的Prefab重命名为__Player_Backup；</li>
<li>修改Player Prefab；</li>
<li>测试一切工作正常，删除__Player_Backup；</li>
</ol>
<p>不要把新复制的命名为Player_New，然后修改它。 有些情况可能更复杂一些。例如，有些修改可能涉及到两个人，上述过程有可能使得场景无法工作，而所有人必须停下来等他们修改完毕。如果修改能够很快完成，那么还用上面这个流程就可以。如果修改需要花很长时间，则可以使用下面的流程：</p>
<ul>
<li>第一个人：<ol>
<li>复制Player Prefab；</li>
<li>把它重命名为<strong>Player_WithNewFeature或者</strong>Player_ForPerson2；</li>
<li>在复制的对象上做修改，然后提交给第二个人；</li>
</ol>
</li>
<li>第二个人：<ol>
<li>在新的Prefab上做修改；</li>
<li>复制Player Prefab，并命名为__Player_Backup；</li>
<li>把__Player_WithNewFeature拖放到场景中，创建它的实例；</li>
<li>把这个实例拖放到原始的Player Prefab中；</li>
<li>如果一切工作正常，则可使删除<strong>Player_Backup和</strong>Player_WithNewFeature;</li>
</ol>
</li>
</ul>
<h2 id="扩展和使用MonoBehaviourBase"><a href="#扩展和使用MonoBehaviourBase" class="headerlink" title="扩展和使用MonoBehaviourBase"></a>扩展和使用MonoBehaviourBase</h2><h3 id="21、扩展一个自己的Mono-Behaviour基类，然后自己的所有组件都从它派生"><a href="#21、扩展一个自己的Mono-Behaviour基类，然后自己的所有组件都从它派生" class="headerlink" title="21、扩展一个自己的Mono Behaviour基类，然后自己的所有组件都从它派生"></a>21、扩展一个自己的Mono Behaviour基类，然后自己的所有组件都从它派生</h3><p>这可以使你方便的实现一些通用函数，例如类型安全的Invoke，或者是一些更复杂的调用（例如random等等）。</p>
<h3 id="22、为Invoke-StartCoroutine-and-Instantiate-定义安全调用方法"><a href="#22、为Invoke-StartCoroutine-and-Instantiate-定义安全调用方法" class="headerlink" title="22、为Invoke, StartCoroutine and Instantiate 定义安全调用方法"></a>22、为Invoke, StartCoroutine and Instantiate 定义安全调用方法</h3><p>定义一个委托任务（delegate Task），用它来定义需要调用的方法，而不要使用字符串属性方法名称，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void Invoke(Task task, float time)</span><br><span class="line">&#123;</span><br><span class="line">   Invoke(task.Method.Name, time);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="23、为共享接口的组件扩展"><a href="#23、为共享接口的组件扩展" class="headerlink" title="23、为共享接口的组件扩展"></a>23、为共享接口的组件扩展</h3><p>有些时候把获得组件、查找对象实现在一个组件的接口中会很方便。 下面这种实现方案使用了typeof，而不是泛型版本的函数。泛型函数无法在接口上工作，而typeof可以。下面这种方法把泛型方法整洁的包装起来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//Defined in the common base class for all mono behaviours</span><br><span class="line">public I GetInterfaceComponent&lt;I&gt;() where I : class</span><br><span class="line">&#123;</span><br><span class="line">   return GetComponent(typeof(I)) as I;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public static List&lt;I&gt; FindObjectsOfInterface&lt;I&gt;() where I : class</span><br><span class="line">&#123;</span><br><span class="line">   MonoBehaviour[] monoBehaviours = FindObjectsOfType&lt;MonoBehaviour&gt;();</span><br><span class="line">   List&lt;I&gt; list = new List&lt;I&gt;();</span><br><span class="line"> </span><br><span class="line">   foreach(MonoBehaviour behaviour in monoBehaviours)</span><br><span class="line">   &#123;</span><br><span class="line">      I component = behaviour.GetComponent(typeof(I)) as I;</span><br><span class="line"> </span><br><span class="line">      if(component != null)</span><br><span class="line">      &#123;</span><br><span class="line">         list.Add(component);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   return list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="24、使用扩展来让代码书写更便捷"><a href="#24、使用扩展来让代码书写更便捷" class="headerlink" title="24、使用扩展来让代码书写更便捷"></a>24、使用扩展来让代码书写更便捷</h3><p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static class CSTransform </span><br><span class="line">&#123;</span><br><span class="line">   public static void SetX(this Transform transform, float x)</span><br><span class="line">   &#123;</span><br><span class="line">      Vector3 newPosition = </span><br><span class="line">         new Vector3(x, transform.position.y, transform.position.z);</span><br><span class="line"> </span><br><span class="line">      transform.position = newPosition;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="25、使用防御性的GetComponent"><a href="#25、使用防御性的GetComponent" class="headerlink" title="25、使用防御性的GetComponent()"></a>25、使用防御性的GetComponent()</h3><p>有些时候强制性组件依赖（通过RequiredComponent）会让人蛋疼。例如，很难在Inspector中修改组件（即使他们有同样的基类）。下面是一种替代方案，当一个必要的组件没有找到时，输出一条错误信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public static T GetSafeComponent&lt;T&gt;(this GameObject obj) where T : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">   T component = obj.GetComponent&lt;T&gt;();</span><br><span class="line"> </span><br><span class="line">   if(component == null)</span><br><span class="line">   &#123;</span><br><span class="line">      Debug.LogError(&quot;Expected to find component of type &quot; </span><br><span class="line">         + typeof(T) + &quot; but found none&quot;, obj);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   return component;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="风格"><a href="#风格" class="headerlink" title="风格"></a>风格</h2><h3 id="26、避免对同一件事使用不同的处理风格"><a href="#26、避免对同一件事使用不同的处理风格" class="headerlink" title="26、避免对同一件事使用不同的处理风格"></a>26、避免对同一件事使用不同的处理风格</h3><p>在很多情况下，某件事并不只有一个惯用手法。在这种情况下，在项目中明确选择其中的一个来使用。下面是原因：</p>
<ul>
<li>一些做法并不能很好的一起协作。使用一个，能强制统一设计方向，并明确指出不是其他做法所指的方向；</li>
<li>团队成员使用统一的风格，可能方便大家互相的理解。他使得整体结构和代码都更容易理解。这也可以减少错误；</li>
</ul>
<p>几组风格的例子：</p>
<ul>
<li>协程与状态机（Coroutines vs. state machines）；</li>
<li>嵌套的Prefab、互相链接的Prefab、超级Prefab（Nested prefabs vs. linked prefabs vs. God prefabs）；</li>
<li>数据分离的策略；</li>
<li>在2D游戏的使用Sprite的方法；</li>
<li>Prefab的结构；</li>
<li>对象生成策略；</li>
<li>定位对象的方法：使用类型、名称、层、引用关系；</li>
<li>对象分组的方法：使用类型、名称、层、引用数组；</li>
<li>找到一组对象，还是让它们自己来注册；</li>
<li>控制执行次序（使用Unity的执行次序设置，还是使用Awake/Start/Update/LateUpdate，还是使用纯手动的方法，或者是次序无关的架构）；</li>
<li>在游戏中使用鼠标选择对象/位置/目标：SelectionManager或者是对象自主管理；</li>
<li>在场景变换时保存数据：通过PlayerPrefs，或者是在新场景加载时不要销毁的对象；</li>
<li>组合动画的方法：混合、叠加、分层；</li>
</ul>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><h3 id="27、维护一个自己的Time类，可以使游戏暂停更容易实现"><a href="#27、维护一个自己的Time类，可以使游戏暂停更容易实现" class="headerlink" title="27、维护一个自己的Time类，可以使游戏暂停更容易实现"></a>27、维护一个自己的Time类，可以使游戏暂停更容易实现</h3><p>做一个“Time.DeltaTime”和”“Time.TimeSinceLevelLoad”的包装，用来实现暂停和游戏速度缩放。这使用起来略显麻烦，但是当对象运行在不同的时钟速率下的时候就方便多了（例如界面动画和游戏内动画）。</p>
<h2 id="生成对象"><a href="#生成对象" class="headerlink" title="生成对象"></a>生成对象</h2><h3 id="28、不要让游戏运行时生成的对象搞乱场景层次结构"><a href="#28、不要让游戏运行时生成的对象搞乱场景层次结构" class="headerlink" title="28、不要让游戏运行时生成的对象搞乱场景层次结构"></a>28、不要让游戏运行时生成的对象搞乱场景层次结构</h3><p>在游戏运行时，为动态生成的对象设置好它们的父对象，可以让你更方便的查找。你可以使用一个空的对象，或者一个没有行为的单件来简化代码中的访问。可以给这个对象命名为“DynamicObjects”。</p>
<h2 id="类设计"><a href="#类设计" class="headerlink" title="类设计"></a>类设计</h2><h3 id="29、使用单件（Singleton）模式"><a href="#29、使用单件（Singleton）模式" class="headerlink" title="29、使用单件（Singleton）模式"></a>29、使用单件（Singleton）模式</h3><p>从下面这个类派生的所有类，将自动获得单件功能：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton&lt;T&gt; : MonoBehaviour where T : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">   protected static T instance;</span><br><span class="line"> </span><br><span class="line">   /**</span><br><span class="line">      Returns the instance of this singleton.</span><br><span class="line">   */</span><br><span class="line">   public static T Instance</span><br><span class="line">   &#123;</span><br><span class="line">      get</span><br><span class="line">      &#123;</span><br><span class="line">         if(instance == null)</span><br><span class="line">         &#123;</span><br><span class="line">            instance = (T) FindObjectOfType(typeof(T));</span><br><span class="line"> </span><br><span class="line">            if (instance == null)</span><br><span class="line">            &#123;</span><br><span class="line">               Debug.LogError(&quot;An instance of &quot; + typeof(T) + </span><br><span class="line">                  &quot; is needed in the scene, but there is none.&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line"> </span><br><span class="line">         return instance;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>单件可以作为一些管理器，例如ParticleManager或者AudioManager亦或者GUIManager。</p>
<ul>
<li>对于那些非唯一的prefab实例使用单件管理器（例如Player）。不要为了坚持这条原则把类的层次关系复杂化，宁愿在你的GameManager（或其他合适的管理器中）中持有一个它们的引用。</li>
<li>对于外部经常使用的共有变量和方法定义为static，这样你可以这样简便的书写“GameManager.Player”，而不用写成“GameManager.Instance.player”。</li>
</ul>
<h3 id="30、在组件中不要使用public成员变量，除非它需要在inspector中调节"><a href="#30、在组件中不要使用public成员变量，除非它需要在inspector中调节" class="headerlink" title="30、在组件中不要使用public成员变量，除非它需要在inspector中调节"></a>30、在组件中不要使用public成员变量，除非它需要在inspector中调节</h3><p>除非需要设计师（策划or美术）去调节的变量，特别是它不能明确表明自己是做什么的变量，不要声明为public。如果在这些特殊情况下，无法避免，则可使用两个甚至四个下划线来表明不要从外部调节它，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public float __aVariable;</span><br></pre></td></tr></table></figure>
<h3 id="31、把界面和游戏逻辑分开"><a href="#31、把界面和游戏逻辑分开" class="headerlink" title="31、把界面和游戏逻辑分开"></a>31、把界面和游戏逻辑分开</h3><p>这一条本质上就是指的MVC模式。</p>
<p>所有的输入控制器，只负责向相应的组件发送命令，让它们知道控制器被调用了。举一个控制器逻辑的例子，一个控制器根据玩家的状态来决定发送哪个命令。但是这样并不好（例如，如果你添加了多个控制器，那将会导致逻辑重复）。相反的，玩家对象应该根据当前状态（例如减速、惊恐）来设置当前的速度，并根据当前的面朝向来计算如何向前移动。控制器只负责做他们自己状态相关的事情，控制器不改变玩家的状态，因此控制前甚至可以根本不知道玩家的状态。另外一个例子，切换武器。正确的方法是，玩家有一个函数：“SwitchWeapon(Weapon newWeapon)”供GUI调用。GUI不应该维护所有对象的Transform和他们之间的父子关系。</p>
<p>所有界面相关的组件，只负责维护和处理他们自己状态相关的数据。例如，显示一个地图，GUI可以根据玩家的位移计算地图的显示。但是，这是游戏状态数据，它不属于GUI。GUI只是显示游戏状态数据，这些数据应该在其他地方维护。地图数据也应该在其他地方维护（例如GameManager）。</p>
<p>游戏玩法对象不应该关心GUI。有一个例外是处理游戏暂停（可能是通过控制Time.timeScale，其实这并不是个好主意）。游戏玩法对象应该知道游戏是否暂停。但是，这就是全部了。另外，不要把GUI组件挂到游戏玩法对象上。</p>
<p>这么说吧，如果你把所有的GUI类都删了，游戏应该可以正确编译。</p>
<p>你还应该达到：在不需要重写游戏逻辑的前提下，重写GUI和输入控制。</p>
<h3 id="32、分离状态控制和簿记变量"><a href="#32、分离状态控制和簿记变量" class="headerlink" title="32、分离状态控制和簿记变量"></a>32、分离状态控制和簿记变量</h3><p>簿记变量只是为了使用起来方便或者提高查找速度，并且可以根据状态控制来覆盖。将两者分离可以简化：</p>
<ul>
<li>保存游戏状态</li>
<li>调试游戏状态</li>
</ul>
<p>实现方法之一是为每个游戏逻辑定义一个”SaveData“类，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line">PlayerSaveData</span><br><span class="line">&#123;</span><br><span class="line">   public float health; //public for serialisation, not exposed in inspector</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">Player</span><br><span class="line">&#123;</span><br><span class="line">   //... bookkeeping variables</span><br><span class="line"> </span><br><span class="line">   //Don’t expose state in inspector. State is not tweakable.</span><br><span class="line">   private PlayerSaveData playerSaveData; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="33、分离特殊的配置"><a href="#33、分离特殊的配置" class="headerlink" title="33、分离特殊的配置"></a>33、分离特殊的配置</h3><p>假设我们有两个敌人，它们使用同一个Mesh，但是有不同的属性设置（例如不同的力量、不同的速度等等）。有很多方法来分离数据。下面是我比较喜欢的一种，特别是对于对象生成或者游戏存档时，会很好用。（属性设置不是状态数据，而是配置数据，所以我们不需要存档他们。当对象加载或者生成是，属性设置会自动加载。）</p>
<ul>
<li>为每一个游戏逻辑类定义一个模板类。例如，对于敌人，我们来一个“EnemyTemplate”，所有的属性设置变量都保存在这个类中。</li>
<li>在游戏逻辑的类中，定义一个上述模板类型的变量。</li>
<li>制作一个敌人的Prefab，以及两个模板的Prefab：“WeakEnemyTemplate”和”StrongEnemyTemplate”。</li>
<li>在加载或者生成对象是，把模板变量正确的复制。</li>
</ul>
<p>这种方法可能有点复杂（在一些情况下，可能不需要这样）。 举个例子，最好使用泛型，我们可以这样定义我们的类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class BaseTemplate</span><br><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class ActorTemplate : BaseTemplate</span><br><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class Entity&lt;EntityTemplateType&gt; where EntityTemplateType : BaseTemplate</span><br><span class="line">&#123;</span><br><span class="line">   EntityTemplateType template;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class Actor : Entity &lt;ActorTemplate&gt;</span><br><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="34、除了显示用的文本，不要使用字符串"><a href="#34、除了显示用的文本，不要使用字符串" class="headerlink" title="34、除了显示用的文本，不要使用字符串"></a>34、除了显示用的文本，不要使用字符串</h3><p>特别是不要用字符串作为对象或者prefab等等的ID标识。一个很遗憾的例外是动画系统，需要使用字符串来访问相应的动画。</p>
<h3 id="35、避免使用public的数组"><a href="#35、避免使用public的数组" class="headerlink" title="35、避免使用public的数组"></a>35、避免使用public的数组</h3><p>举例说明，不要定义一个武器的数组，一个子弹的数组，一个粒子的数组，这样你的代码看起来像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public void SelectWeapon(int index)</span><br><span class="line">&#123; </span><br><span class="line">   currentWeaponIndex = index;</span><br><span class="line">   Player.SwitchWeapon(weapons[currentWeapon]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void Shoot()</span><br><span class="line">&#123;</span><br><span class="line">   Fire(bullets[currentWeapon]);</span><br><span class="line">   FireParticles(particles[currentWeapon]);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这在代码中还不是什么大问题，但是在Inspector中设置他们的值的时候，就很难不犯错了。 我们可以定义一个类，来封装这三个变量，然后使用一个它的实例数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line">public class Weapon</span><br><span class="line">&#123;</span><br><span class="line">   public GameObject prefab;</span><br><span class="line">   public ParticleSystem particles;</span><br><span class="line">   public Bullet bullet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样代码看起来很整洁，但是更重要的是，在Inspector中设置时就不容易犯错了。</p>
<h3 id="36、在结构中避免使用数组"><a href="#36、在结构中避免使用数组" class="headerlink" title="36、在结构中避免使用数组"></a>36、在结构中避免使用数组</h3><p>举个例子，一个玩家可以有三种攻击形式，每种使用当前的武器，并发射不同的子弹、产生不同的行为。 你可以把三个子弹作为一个数组，并像下面这样组织逻辑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void FireAttack()</span><br><span class="line">&#123;</span><br><span class="line">   /// behaviour</span><br><span class="line">   Fire(bullets[0]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void IceAttack()</span><br><span class="line">&#123;</span><br><span class="line">   /// behaviour</span><br><span class="line">   Fire(bullets[1]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public void WindAttack()</span><br><span class="line">&#123;</span><br><span class="line">   /// behaviour</span><br><span class="line">   Fire(bullets[2]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用枚举值可以让代码看起来更好一点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public void WindAttack()</span><br><span class="line">&#123;</span><br><span class="line">   /// behaviour</span><br><span class="line">   Fire(bullets[WeaponType.Wind]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是这对Inspector一点也不好。 最好使用单独的变量，并且起一个好的变量名，能够代表他们的内容的含义。使用下面这个类会更整洁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line">public class Bullets</span><br><span class="line">&#123;</span><br><span class="line">   public Bullet FireBullet;</span><br><span class="line">   public Bullet IceBullet;</span><br><span class="line">   public Bullet WindBullet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里假设没有其他的Fire、Ice、Wind的数据。</p>
<h3 id="37、把数据组织到可序列化的类中，可以让inspector更整洁"><a href="#37、把数据组织到可序列化的类中，可以让inspector更整洁" class="headerlink" title="37、把数据组织到可序列化的类中，可以让inspector更整洁"></a>37、把数据组织到可序列化的类中，可以让inspector更整洁</h3><p>有些对象有一大堆可调节的变量，这种情况下在Inspector中找到某个变量简直就成了噩梦。为了简化这种情况，可以使用一下的步骤：</p>
<ul>
<li>把这些变量分组定义到不同的类中，并让它们声明为public和serializable；</li>
<li>在一个主要的类中，把上述类的实例定义为public成员变量；</li>
<li>不用在Awake或者Start中初始化这些变量，因为Unity会处理好它们；</li>
<li>你可以定义它们的默认值；</li>
</ul>
<p>这可以把变量分组到Inspector的分组页签中，方便管理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Serializable]</span><br><span class="line">public class MovementProperties //Not a MonoBehaviour!</span><br><span class="line">&#123;</span><br><span class="line">   public float movementSpeed;</span><br><span class="line">   public float turnSpeed = 1; //default provided</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class HealthProperties //Not a MonoBehaviour!</span><br><span class="line">&#123;</span><br><span class="line">   public float maxHealth;</span><br><span class="line">   public float regenerationRate;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public class Player : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">   public MovementProperties movementProeprties;</span><br><span class="line">   public HealthPorperties healthProeprties;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h2><h3 id="38、如果你有很多的剧情文本，那么把他们放到一个文件里面"><a href="#38、如果你有很多的剧情文本，那么把他们放到一个文件里面" class="headerlink" title="38、如果你有很多的剧情文本，那么把他们放到一个文件里面"></a>38、如果你有很多的剧情文本，那么把他们放到一个文件里面</h3><p>不要把他们放到Inspector的字段中去编辑。这些需要做到不打开Unity，也不用保存Scene就可以方便的修改。</p>
<h3 id="39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置"><a href="#39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置" class="headerlink" title="39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置"></a>39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置</h3><p>有很多种方法来实现这点。例如，定义一个文本Class，为每个字符串定义一个public的字符串字段，并把他们的默认值设为英文。其他的语言定义为子类，然后重新初始化这些字段为相应的语言的值。 另外一种更好的技术（适用于文本很大或者支持的语言数量众多），可以读取几个单独的表单，然后提供一些逻辑，根据所选择的语言来选取正确的字符串。</p>
<h2 id="测试与调试"><a href="#测试与调试" class="headerlink" title="测试与调试"></a>测试与调试</h2><h3 id="40、实现一个图形化的Log用来调试物理、动画和AI"><a href="#40、实现一个图形化的Log用来调试物理、动画和AI" class="headerlink" title="40、实现一个图形化的Log用来调试物理、动画和AI"></a>40、实现一个图形化的Log用来调试物理、动画和AI</h3><p>这可以显著的加速调试工作。详见: <a href="http://devmag.org.za/2011/01/25/make-your-logs-interactive-and-squash-bugs-faster/" target="_blank" rel="noopener">http://devmag.org.za/2011/01/25/make-your-logs-interactive-and-squash-bugs-faster/</a>。</p>
<h3 id="41、实现一个HTML的Log"><a href="#41、实现一个HTML的Log" class="headerlink" title="41、实现一个HTML的Log"></a>41、实现一个HTML的Log</h3><p>在很多情况下，日志是非常有用的。拥有一个便于分析的Log（颜色编码、有多个视图、记录屏幕截图等）可以使基于Log的调试变动愉悦。详见: <a href="http://devmag.org.za/2011/02/09/using-graphs-to-debug-physics-ai-and-animation-effectively/" target="_blank" rel="noopener">http://devmag.org.za/2011/02/09/using-graphs-to-debug-physics-ai-and-animation-effectively/</a>。</p>
<h3 id="42、实现一个你自己的帧速率计算器"><a href="#42、实现一个你自己的帧速率计算器" class="headerlink" title="42、实现一个你自己的帧速率计算器"></a>42、实现一个你自己的帧速率计算器</h3><p>没有人知道Unity的FPS计算器在做什么，但是肯定不是计算帧速率。实现一个你自己的，让数字符合直觉并可视化。</p>
<h3 id="43、实现一个截屏的快捷键"><a href="#43、实现一个截屏的快捷键" class="headerlink" title="43、实现一个截屏的快捷键"></a>43、实现一个截屏的快捷键</h3><p>很多BUG是图形化的，如果你有一个截图，就很容易报告它。一个理想的系统，应该在PlayerPrefes中保存一个计数，并根据这个计数，使得所有成功保存的截屏文件都不被覆盖掉。截屏文件应该保存在工程文件夹之外，这可以防止人们不小心把它提交到版本库中。</p>
<h3 id="44、实现一个打印玩家坐标的快捷键"><a href="#44、实现一个打印玩家坐标的快捷键" class="headerlink" title="44、实现一个打印玩家坐标的快捷键"></a>44、实现一个打印玩家坐标的快捷键</h3><p>这可以在汇报位置相关的BUG时明确它发生在世界中的什么位置，这可以让Debug容易一些。</p>
<h3 id="45、实现一些Debug选项，用来方便测试"><a href="#45、实现一些Debug选项，用来方便测试" class="headerlink" title="45、实现一些Debug选项，用来方便测试"></a>45、实现一些Debug选项，用来方便测试</h3><p>一些例子：</p>
<ul>
<li>解锁所有道具；</li>
<li>关闭所有敌人；</li>
<li>关闭GUI；</li>
<li>让玩家无敌；</li>
<li>关闭所有游戏逻辑；</li>
</ul>
<h3 id="46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab"><a href="#46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab" class="headerlink" title="46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab"></a>46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab</h3><p>设置一个用户标识文件，单不要提交到版本库，在游戏运行时读取它。下面是原因：</p>
<ul>
<li>团队的成员不会因为意外的提交了自己的Debug设置而影响到其他人。</li>
<li>修改Debug设置不需要修改场景。</li>
</ul>
<h3 id="47、维护一个包含所有游戏元素的场景"><a href="#47、维护一个包含所有游戏元素的场景" class="headerlink" title="47、维护一个包含所有游戏元素的场景"></a>47、维护一个包含所有游戏元素的场景</h3><p>例如，一个场景，包括所有的敌人，所有可以交互的对象等等。这样可以不用玩很久，而进行全面的功能测试。</p>
<h3 id="48、定义一些Debug快捷键常量，并把他们保存在统一的地方"><a href="#48、定义一些Debug快捷键常量，并把他们保存在统一的地方" class="headerlink" title="48、定义一些Debug快捷键常量，并把他们保存在统一的地方"></a>48、定义一些Debug快捷键常量，并把他们保存在统一的地方</h3><p>Debug键通常（方便起见）在一个地方来处理，就像其他的游戏输入一样。为了避免快捷键冲突，在一个中心位置定义所有常量。一种替代方案是，在一个地方处理所有按键输入，不管他是否是Debug键。（负面作用是，这个类可能需要引用更多的其他对象）</p>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><h3 id="49、为你的设置建立文档"><a href="#49、为你的设置建立文档" class="headerlink" title="49、为你的设置建立文档"></a>49、为你的设置建立文档</h3><p>代码应该拥有最多的文档，但是一些代码之外的东西也必须建立文档。让设计师们通过代码去看如果进行设置是浪费时间。把设置写入文档，可以提高效率（如果文档的版本能够及时更新的话）。 用文档记录下面这些：</p>
<ul>
<li>Layer的使用（碰撞、检测、射线检测——本质上说，什么东西应该在哪个Layer里）；</li>
<li>Tag的使用；</li>
<li>GUI的depth层级（说什么应该显示在什么之上）；</li>
<li>惯用的处理方式；</li>
<li>Prefab结构；</li>
<li>动画Layer。</li>
</ul>
<h2 id="命名规则和目录结构"><a href="#命名规则和目录结构" class="headerlink" title="命名规则和目录结构"></a>命名规则和目录结构</h2><h3 id="50、遵从一个命名规范和目录结构，并建立文档"><a href="#50、遵从一个命名规范和目录结构，并建立文档" class="headerlink" title="50、遵从一个命名规范和目录结构，并建立文档"></a>50、遵从一个命名规范和目录结构，并建立文档</h3><p>命名和目录结构的一致性，可以方便查找，并明确指出什么东西在哪里。 你很有可能需要创建自己的命名规则和目录结构，下面的例子仅供参考。</p>
<p><strong>普遍的命名规则</strong></p>
<ol>
<li>名字应该代表它是什么，例如鸟就应该叫做Bird。</li>
<li>选择可以发音、方便记忆的名字。如果你在制作一个玛雅文化相关的游戏，不要把关卡命名为QuetzalcoatisReturn。</li>
<li>保持唯一性。如果你选择了一个名字，就坚持用它。</li>
<li>使用Pascal风格的大小写，例如ComplicatedVerySpecificObject。</li>
<li>不要使用空格，下划线，或者连字符，除了一个例外（详见为同一事物的不同方面命名一节）。</li>
<li>不要使用版本数字，或者标示他们进度的名词（WIP、final）。</li>
<li>不要使用缩写：DVamp@W应该写成DarkVampire@Walk。</li>
<li>使用设计文档中的术语：如果文档中称呼一个动画为Die，那么使用DarkVampire@Die，而不要用DarkVampire@Death。</li>
<li>保持细节修饰词在左侧：DarkVampire，而不是VampireDark；PauseButton，而不是ButtonPaused。举例说明，在Inspector中查找PauseButton，比所有按钮都以Button开头方便。（很多人倾向于相反的次序，认为那样名字可以自然的分组。然而，名字不是用来分组的，目录才是。名字是用来在同一类对象中可以快速辨识的。）</li>
<li>为一个序列使用同一个名字，并在这些名字中使用数字。例如PathNode0, PathNode1。永远从0开始，而不是1。</li>
<li>对于不是序列的情况，不要使用数字。例如 Bird0, Bird1, Bird2，本应该是Flamingo, Eagle, Swallow。</li>
<li>为临时对象添加双下划线前缀，例如__Player_Backup。</li>
</ol>
<p><strong>为同一事物的不同方面命名</strong></p>
<p>在核心名称后面添加下划线，后面的部分代表哪个方面。例如：</p>
<ul>
<li>GUI中的按钮状态：EnterButton_Active、EnterButton_Inactive</li>
<li>贴图： DarkVampire_Diffuse, DarkVampire_Normalmap</li>
<li>天空盒：JungleSky_Top, JungleSky_North</li>
<li>LOD分组：DarkVampire_LOD0, DarkVampire_LOD1</li>
</ul>
<p><strong>结构</strong></p>
<p>场景组织、工程目录、脚本目录应该使用相似的模式。</p>
<p><strong>目录结构</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Materials</span><br><span class="line">GUI</span><br><span class="line">Effects</span><br><span class="line">Meshes</span><br><span class="line">   Actors</span><br><span class="line">      DarkVampire</span><br><span class="line">      LightVampire</span><br><span class="line">      ...</span><br><span class="line">   Structures</span><br><span class="line">      Buildings</span><br><span class="line">      ...</span><br><span class="line">   Props</span><br><span class="line">      Plants</span><br><span class="line">      ...</span><br><span class="line">   ...</span><br><span class="line">Plugins</span><br><span class="line">Prefabs</span><br><span class="line">   Actors</span><br><span class="line">   Items</span><br><span class="line">   ...</span><br><span class="line">Resources</span><br><span class="line">   Actors</span><br><span class="line">   Items</span><br><span class="line">   ...</span><br><span class="line">Scenes</span><br><span class="line">   GUI</span><br><span class="line">   Levels</span><br><span class="line">   TestScenes</span><br><span class="line">Scripts</span><br><span class="line">Textures</span><br><span class="line">GUI</span><br><span class="line">Effects</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>场景结构</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Cameras</span><br><span class="line">Dynamic Objects</span><br><span class="line">Gameplay</span><br><span class="line">   Actors</span><br><span class="line">   Items</span><br><span class="line">   ...</span><br><span class="line">GUI</span><br><span class="line">   HUD</span><br><span class="line">   PauseMenu</span><br><span class="line">   ...</span><br><span class="line">Management</span><br><span class="line">Lights</span><br><span class="line">World</span><br><span class="line">   Ground</span><br><span class="line">   Props</span><br><span class="line">   Structure</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
<p><strong>脚本目录结构</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ThirdParty</span><br><span class="line">   ...</span><br><span class="line">MyGenericScripts</span><br><span class="line">   Debug</span><br><span class="line">   Extensions</span><br><span class="line">   Framework</span><br><span class="line">   Graphics</span><br><span class="line">   IO</span><br><span class="line">   Math</span><br><span class="line">   ...</span><br><span class="line">MyGameScripts</span><br><span class="line">   Debug</span><br><span class="line">   Gameplay</span><br><span class="line">      Actors</span><br><span class="line">      Items</span><br><span class="line">      ...</span><br><span class="line">   Framework</span><br><span class="line">   Graphics</span><br><span class="line">   GUI</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="王国聪 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="王国聪 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/专业/" rel="tag"># 专业</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/01/游戏摄像机设计/" rel="next" title="游戏摄像机设计（moba）">
                <i class="fa fa-chevron-left"></i> 游戏摄像机设计（moba）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/15/垃圾回收机制(GC)的六个小知识/" rel="prev" title="垃圾回收机制(GC)的六个小知识">
                垃圾回收机制(GC)的六个小知识 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
  
   </div>





        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/2.jpg" alt="王国聪">
            
              <p class="site-author-name" itemprop="name">王国聪</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wangguocong" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/wangzhezhijian" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/6072272096/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="微博">
                      
                        <i class="fa fa-fw fa-weibo"></i>微博</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/wa.ng1846" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

	
          
          

          
          
		  
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Unity的50个技巧：Unity最佳实践"><span class="nav-number">1.</span> <span class="nav-text">Unity的50个技巧：Unity最佳实践</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#关于这些技巧"><span class="nav-number">1.1.</span> <span class="nav-text">关于这些技巧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流程"><span class="nav-number">1.2.</span> <span class="nav-text">流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、避免Assets分支"><span class="nav-number">1.2.1.</span> <span class="nav-text">1、避免Assets分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second-Copy用来测试"><span class="nav-number">1.2.2.</span> <span class="nav-text">2、如果你在使用版本控制的话，每个团队成员都应该保有一个项目的Second Copy用来测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、考虑使用外部的关卡编辑工具"><span class="nav-number">1.2.3.</span> <span class="nav-text">3、考虑使用外部的关卡编辑工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、考虑把关卡保存为XML，而非scene"><span class="nav-number">1.2.4.</span> <span class="nav-text">4、考虑把关卡保存为XML，而非scene</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、考虑编写通用的自定义Inspector代码"><span class="nav-number">1.2.5.</span> <span class="nav-text">5、考虑编写通用的自定义Inspector代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#场景组织"><span class="nav-number">1.3.</span> <span class="nav-text">场景组织</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6、使用命名的空Game-Object来做场景目录"><span class="nav-number">1.3.1.</span> <span class="nav-text">6、使用命名的空Game Object来做场景目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、把控制对象和场景目录（空Game-Objec）放在原点（0，0，0）"><span class="nav-number">1.3.2.</span> <span class="nav-text">7、把控制对象和场景目录（空Game Objec）放在原点（0，0，0）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、尽量减少使用GUI组件的offset"><span class="nav-number">1.3.3.</span> <span class="nav-text">8、尽量减少使用GUI组件的offset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、把世界的地面放在Y-0"><span class="nav-number">1.3.4.</span> <span class="nav-text">9、把世界的地面放在Y=0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、使游戏可以从每个Scene启动"><span class="nav-number">1.3.5.</span> <span class="nav-text">10、使游戏可以从每个Scene启动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#美术"><span class="nav-number">1.4.</span> <span class="nav-text">美术</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11、把角色和地面物体的中心点-Pivot-放在底部，不要放在中间"><span class="nav-number">1.4.1.</span> <span class="nav-text">11、把角色和地面物体的中心点(Pivot)放在底部，不要放在中间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12、统一所有的模型的面朝向（Z轴正向或者反向）"><span class="nav-number">1.4.2.</span> <span class="nav-text">12、统一所有的模型的面朝向（Z轴正向或者反向）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13、在开始就把Scale搞正确"><span class="nav-number">1.4.3.</span> <span class="nav-text">13、在开始就把Scale搞正确</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型"><span class="nav-number">1.4.4.</span> <span class="nav-text">14、为GUI组件或者手动创建的粒子制作一个两个面的平面模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15、制作并使用测试资源"><span class="nav-number">1.4.5.</span> <span class="nav-text">15、制作并使用测试资源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prefabs"><span class="nav-number">1.5.</span> <span class="nav-text">Prefabs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16、所有东西都使用Prefab"><span class="nav-number">1.5.1.</span> <span class="nav-text">16、所有东西都使用Prefab</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17、对于特例使用单独的Prefab，而不要使用特殊的实例对象"><span class="nav-number">1.5.2.</span> <span class="nav-text">17、对于特例使用单独的Prefab，而不要使用特殊的实例对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18、在Prefab之间链接，而不要链接实例对象"><span class="nav-number">1.5.3.</span> <span class="nav-text">18、在Prefab之间链接，而不要链接实例对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19、如果可能，自动在实例对象之间产生链接关系"><span class="nav-number">1.5.4.</span> <span class="nav-text">19、如果可能，自动在实例对象之间产生链接关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20、使用安全的流程来处理Prefab分支"><span class="nav-number">1.5.5.</span> <span class="nav-text">20、使用安全的流程来处理Prefab分支</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展和使用MonoBehaviourBase"><span class="nav-number">1.6.</span> <span class="nav-text">扩展和使用MonoBehaviourBase</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#21、扩展一个自己的Mono-Behaviour基类，然后自己的所有组件都从它派生"><span class="nav-number">1.6.1.</span> <span class="nav-text">21、扩展一个自己的Mono Behaviour基类，然后自己的所有组件都从它派生</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22、为Invoke-StartCoroutine-and-Instantiate-定义安全调用方法"><span class="nav-number">1.6.2.</span> <span class="nav-text">22、为Invoke, StartCoroutine and Instantiate 定义安全调用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23、为共享接口的组件扩展"><span class="nav-number">1.6.3.</span> <span class="nav-text">23、为共享接口的组件扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24、使用扩展来让代码书写更便捷"><span class="nav-number">1.6.4.</span> <span class="nav-text">24、使用扩展来让代码书写更便捷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25、使用防御性的GetComponent"><span class="nav-number">1.6.5.</span> <span class="nav-text">25、使用防御性的GetComponent()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#风格"><span class="nav-number">1.7.</span> <span class="nav-text">风格</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#26、避免对同一件事使用不同的处理风格"><span class="nav-number">1.7.1.</span> <span class="nav-text">26、避免对同一件事使用不同的处理风格</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#时间"><span class="nav-number">1.8.</span> <span class="nav-text">时间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#27、维护一个自己的Time类，可以使游戏暂停更容易实现"><span class="nav-number">1.8.1.</span> <span class="nav-text">27、维护一个自己的Time类，可以使游戏暂停更容易实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成对象"><span class="nav-number">1.9.</span> <span class="nav-text">生成对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#28、不要让游戏运行时生成的对象搞乱场景层次结构"><span class="nav-number">1.9.1.</span> <span class="nav-text">28、不要让游戏运行时生成的对象搞乱场景层次结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类设计"><span class="nav-number">1.10.</span> <span class="nav-text">类设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#29、使用单件（Singleton）模式"><span class="nav-number">1.10.1.</span> <span class="nav-text">29、使用单件（Singleton）模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#30、在组件中不要使用public成员变量，除非它需要在inspector中调节"><span class="nav-number">1.10.2.</span> <span class="nav-text">30、在组件中不要使用public成员变量，除非它需要在inspector中调节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31、把界面和游戏逻辑分开"><span class="nav-number">1.10.3.</span> <span class="nav-text">31、把界面和游戏逻辑分开</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32、分离状态控制和簿记变量"><span class="nav-number">1.10.4.</span> <span class="nav-text">32、分离状态控制和簿记变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#33、分离特殊的配置"><span class="nav-number">1.10.5.</span> <span class="nav-text">33、分离特殊的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#34、除了显示用的文本，不要使用字符串"><span class="nav-number">1.10.6.</span> <span class="nav-text">34、除了显示用的文本，不要使用字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#35、避免使用public的数组"><span class="nav-number">1.10.7.</span> <span class="nav-text">35、避免使用public的数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#36、在结构中避免使用数组"><span class="nav-number">1.10.8.</span> <span class="nav-text">36、在结构中避免使用数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37、把数据组织到可序列化的类中，可以让inspector更整洁"><span class="nav-number">1.10.9.</span> <span class="nav-text">37、把数据组织到可序列化的类中，可以让inspector更整洁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文本"><span class="nav-number">1.11.</span> <span class="nav-text">文本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#38、如果你有很多的剧情文本，那么把他们放到一个文件里面"><span class="nav-number">1.11.1.</span> <span class="nav-text">38、如果你有很多的剧情文本，那么把他们放到一个文件里面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置"><span class="nav-number">1.11.2.</span> <span class="nav-text">39、如果你计划实现本地化，那么把你的字符串分离到一个统一的位置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试与调试"><span class="nav-number">1.12.</span> <span class="nav-text">测试与调试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#40、实现一个图形化的Log用来调试物理、动画和AI"><span class="nav-number">1.12.1.</span> <span class="nav-text">40、实现一个图形化的Log用来调试物理、动画和AI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#41、实现一个HTML的Log"><span class="nav-number">1.12.2.</span> <span class="nav-text">41、实现一个HTML的Log</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#42、实现一个你自己的帧速率计算器"><span class="nav-number">1.12.3.</span> <span class="nav-text">42、实现一个你自己的帧速率计算器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#43、实现一个截屏的快捷键"><span class="nav-number">1.12.4.</span> <span class="nav-text">43、实现一个截屏的快捷键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#44、实现一个打印玩家坐标的快捷键"><span class="nav-number">1.12.5.</span> <span class="nav-text">44、实现一个打印玩家坐标的快捷键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#45、实现一些Debug选项，用来方便测试"><span class="nav-number">1.12.6.</span> <span class="nav-text">45、实现一些Debug选项，用来方便测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab"><span class="nav-number">1.12.7.</span> <span class="nav-text">46、为每一个足够小的团队，创建一个适合他们的Debug选项的Prefab</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#47、维护一个包含所有游戏元素的场景"><span class="nav-number">1.12.8.</span> <span class="nav-text">47、维护一个包含所有游戏元素的场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#48、定义一些Debug快捷键常量，并把他们保存在统一的地方"><span class="nav-number">1.12.9.</span> <span class="nav-text">48、定义一些Debug快捷键常量，并把他们保存在统一的地方</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文档"><span class="nav-number">1.13.</span> <span class="nav-text">文档</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#49、为你的设置建立文档"><span class="nav-number">1.13.1.</span> <span class="nav-text">49、为你的设置建立文档</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名规则和目录结构"><span class="nav-number">1.14.</span> <span class="nav-text">命名规则和目录结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#50、遵从一个命名规范和目录结构，并建立文档"><span class="nav-number">1.14.1.</span> <span class="nav-text">50、遵从一个命名规范和目录结构，并建立文档</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
	

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王国聪</span>

  
</div>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>
  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'kFDzUjHEhV5wo8WKMcXQGmB7-gzGzoHsz',
        appKey: 'vPuL0oXJC12Vo7xj524tF3ng',
        placeholder: 'ヾﾉ≧∀≦)o 来呀！快活呀！~',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

  
  	<!-- 页面点击小红心 -->
	<script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>

